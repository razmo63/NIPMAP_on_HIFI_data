### NIPMAP_on_HIFI_data

#### Data acquisition 

The data input format is Hyperplexed Immunofluorescence Imaging (HIFI) on glioblastoma samples from mice which is generated by Spence Watscon from Joyce Lab in Lausanne (Watson et al., 2023). With this technique, more than 45 makers can be detected in cyclic Immunofluorescence. In HIFI data rows represent image information and column have information such as spatial coordinates of the cells (x and y position), Cell type, min, max, mean, median, and standard deviation intensities of the biomarker that are detected in the experiment per cell and cluster. Cell positions were identified by the nuclear DAPI staining. The data used in this project has a dimension of 2,499,443 x 1017 including 11 images, 9 cell types, and 48 biomarkers. Since NIPMAP tools only accept rectangular images as input, the original image was cropped to yield the largest possible rectangle that includes all major cell types. The cropped filtered rectangular tissue consists of 141,994 cells. 


#### Overview of the NIPMAP analysis and required data and packages.

                        " Analysis in Python3.7.13 "

* Required packages:
          
          
        matplotlib, scipy, pandas, numpy==1.8.1, scikit-learn, seaborn, qpsolvers==1.9.0, mpl_toolkits.
        *** The "NIPMAP (Required Packages)" folder provided in the GitHub link contains the NIPMAP package ***


* Required Data:

•	Input 1: CSV file named “patient<PatientID or number>_cell_positions.csv”
, includes four columns, containing the values of x and y coordinates of the cells, cell ID, and cell type. These columns have headers as the following: “x”, “y”, “label”, and “cell_type” respectively

* Analysis:

•	Calculation of sampling site cell composition using Gaussian kernel 
•	Generate sampling site and cell abundance (based on the radius value)
•	PCA and Archetype Analysis
•	Niche identification
•	Image segmentation into niches
•	Niche environments of cells


                              " Analysis in R 4.1.3 "


* Required packages:
     

          tidyverse (dplyr, purrr, ggplot2), RColorBrewer, rjson, readxl, plotly, grid, gridExtra
          *** The "NIPMAP (Required Packages)" folder provided in the GitHub link contains the NIPMAP package ***


* Required Data:

•	Input 2: CSV file named “cellData.csv”
, includes sample ID, cell ID, and the biomarkers intensity values used in the experiment. These headers must be named “SampleID”, “cellLabelInImage”, and the biomarkers names, such as marker1, marker2, etc... respectively.

* Analysis:

•	Niche-phenotype mapping





